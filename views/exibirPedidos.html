<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedidos</title>
    <link rel="stylesheet" href="/css/tabelapedidos.css">
    <link rel="stylesheet" href="/css/tela-pedidos.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:wght@400;700;900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">
        <link rel="shortcut icon" href="/img/logo.png" type="image/x-icon">
</head>
<body>
    <h1>Lista de Pedidos</h1>
    <table >
        <thead >
            <tr class="tabela-main">
                <th>ID do Pedido</th>
                <th >Cliente</th>
                <th >Mesa</th>
                <th >Itens</th>
                <th >Valor Total</th>
                <th >Data do Pedido</th>
                
            </tr>
        </thead>
        <tbody >
            <% pedidos.forEach(pedido => { %>
                <tr class="tabela-main">
                    <td><%= pedido.id %></td>
                    <td><%= pedido.cliente %></td>
                    <td><%= pedido.mesa %></td>
                    <td>
                        <ul >
                            <% const itens = JSON.parse(pedido.itens); %>
                            <% Object.keys(itens).forEach(nomeItem => { %>
                                <li class="lista-itens"><strong><%= nomeItem %>:</strong> Quantidade: <%= itens[nomeItem].count %>, Preço: R$ <%= itens[nomeItem].price.toFixed(2) %></li>
                            <% }); %>
                        </ul>
                    </td>
                    <td>R$ <%= pedido.valor_total ? parseFloat(pedido.valor_total).toFixed(2) : '0.00' %></td>
                    <td class="data-tabela"> <% const data = new Date(pedido.data_pedido); %>
                        <%= data.toLocaleDateString('pt-BR') %> <%= data.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }) %></td>
                </tr>
            <% }) %>
        </tbody>
    </table>

    <h1>Lista de Usuários</h1>
<table>
    <thead >
        <tr class="tabela-main">
            <th >ID do Usuário</th>
            <th >Email</th>
            <th>Senha</th>
        </tr>
    </thead>
    <tbody>
        <% usuarios.forEach(usuario => { %>
            <tr class="tabela-main">
                <td class="tabela-usuario" ><%= usuario.id %></td>
                <td   class="tabela-usuario"><%= usuario.email %></td>
                <td  class="tabela-usuario"><%= usuario.senha %></td>
            </tr>
        <% }) %>
    </tbody>
</body>
</html>